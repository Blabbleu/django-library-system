document.querySelectorAll('.request-form').forEach(function(form){form.addEventListener('submit',function(event){event.preventDefault();let formData=new FormData(form);fetch(form.action,{method:'POST',body:formData,headers:{'X-CSRFToken':formData.get('csrfmiddlewaretoken')}}).then(response=>{if(response.headers.get('content-type').includes('application/json')){return response.json();}else{location.reload();}}).then(data=>{if(data.success){let button=form.querySelector('button');button.innerText='Requested';button.disabled=true;}else if(data.errors){alert('An error occurred: '+JSON.stringify(data.errors));}}).catch(error=>console.error('Error submitting request:',error));});});;