document.getElementById('search-button').addEventListener('click',function(){const query=document.getElementById('search-input').value;fetch(`/books/query/?q=${query}`).then(response=>response.json()).then(data=>{const booksGrid=document.getElementById('recommended-books');booksGrid.innerHTML='';data.forEach(book=>{const bookCard=document.createElement('div');bookCard.className='index-book-card';bookCard.dataset.bookId=book.id;bookCard.innerHTML=`
                        <a href="/book/${book.id}/">
                            <img src="${book.thumbnail}" alt="Thumbnail" class="img-fluid book-thumbnail">
                            <p class="index-book-category">${book.categories}</p>
                            <h4 class="index-book-title">${book.title}</h4>
                            <p class="index-book-author">${book.author}</p>
                        </a>
                        ${book.is_favorite ? '<i class="fas fa-heart heart-icon" data-favorite="true"></i>' : '<i class="far fa-heart heart-icon" data-favorite="false"></i>'}
                    `;booksGrid.appendChild(bookCard);});}).catch(error=>console.error('Error fetching search results:',error));});document.querySelectorAll('.heart-icon').forEach(icon=>{icon.addEventListener('click',function(){const bookId=this.closest('.index-book-card').dataset.bookId;const isFavorite=this.dataset.favorite==='true';const url=isFavorite?'/remove_favorite/':'/add_favorite/';fetch(url,{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':''},body:JSON.stringify({book_id:bookId})}).then(response=>response.json()).then(data=>{if(data.success){this.classList.toggle('fas',!isFavorite);this.classList.toggle('far',isFavorite);this.dataset.favorite=!isFavorite;}else{console.error('Error updating favorite status:',data.error);}}).catch(error=>console.error('Error updating favorite status:',error));});});document.getElementById('recommended-tab').addEventListener('click',function(){document.getElementById('recommended-books').classList.remove('d-none');document.getElementById('recently-read-books').classList.add('d-none');this.classList.add('active');document.getElementById('recently-read-tab').classList.remove('active');});document.getElementById('recently-read-tab').addEventListener('click',function(){document.getElementById('recently-read-books').classList.remove('d-none');document.getElementById('recommended-books').classList.add('d-none');this.classList.add('active');document.getElementById('recommended-tab').classList.remove('active');});;